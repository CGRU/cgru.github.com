<h1>CGRU Configuration</h1>

<h2>Config files</h2>
<p>
CGRU configuration files based JSON.
One config file can include other, where parameters can be overridden.
Config file can contain OS specific section, which parameters will be read only if client platform parameters matches OS section name.
</p>
<p>
At first <kbd>cgru/config_default.json</kbd> is read, where global parameters are set.
It includes <kbd>cgru/afanasy/config.json</kbd> which configures Afanasy specific parameters.
At last it tries to load <kbd>cgru/config.json</kbd>, where you should override some your company specific parameters.
At least you should specify Afanasy server location in it.
</p>
<p>
CGRU Keeper and AfWatch stores settings in <kbd>HOME/.cgru/config.json</kbd>.
It is read with the same rules as the main config.
User can use it to set its own properties and override global config settings.
</p>
<p>
Each parameter should be preset only once in a config file.
If there will several parameters with the same name in a same file, which will be chosen is undefined.
Parameters order plays no role.
Included files are read after the end of file, no matter where include line is.
If in the next included file there will be a parameter with the same name, it value will be overridden.
</p>
<p>
<a href="http://json.org" target="_blank">JSON syntax reference.</a> *
</p>
<p>
Better to check config with <kbd>afcmd</kbd>. Just run this command with no arguments.
On error it will output error message, position and some text around it.
You can also view configuration in Keeper, but it can not to start on bad config at all.
Keeper Configuration window will display result configuration and each config file contents in the order they where read (included).
</p>
<p>
* There is no comments in JSON syntax. But there are ways to comment JSON files.
For example you can create an object with no name: <br/>
<kbd>"":"Some comment text."</kbd><br/>
Or create an object with some unused name.
To disable (comment) some parameter you can change it name to unused.
For example you can just prefix name with "-".
</p>


<h2>Environment</h2>
<p>
Common user does not need to setup environment variables manually.
Use Keeper or start scrips they will setup environment.
To setup a console you should go to CGRU root folder and source setup script.
</p>
<pre>
$ cd cgru
$ source ./setup.sh
</pre>


<h3>Manual Environment Setup</h3>

<h4>Required:</h4>
<ul>
<li><b>CGRU_LOCATION</b> - CGRU root folder.</li>
<li><b>AF_ROOT</b> - AFANASY root folder.</li>
<li><b>PYTHONPATH</b> - To import CGRU and AFANASY Python modules.
	<ul>
	<li><b>cgru/lib/python</b> - CGRU Python general library path.</li>
	<li><b>cgru/afanasy/python</b> - AFANASY Python library path.</li>
	</ul>
</li>
</ul>
* You can separate CGRU and AFANASY, use different locations and versions.

<h4>Optional:</h4>
<ul>
<li><b>CGRU_VERSION</b> - CGRU version string, will be shown in AfWatch and Browser. May be any. You can add some useful info to real version at work.</li>
<li><b>AF_HOSTNAME</b> - Override hostname for AFANASY. Useful to run several clients on the same machine.</li>
<li><b>AF_USERNAME</b> - Override user name for AFANASY.</li>
<li><b>PATH</b> - Run commands.
	<ul>
	<li><b>cgru/bin</b> - CGRU tools.</li>
	<li><b>cgru/afanasy/bin</b> - AFANASY applications.</li>
	</ul>
</li>
</ul>

