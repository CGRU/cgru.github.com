<h2>Afanasy Farm Setup</h2>

<p>
After general configuration, Afanasy tries to load <kbd>cgru/afanasy/farm.json</kbd> to setup a farm.
If this file does not exists it load <kbd>cgru/afanasy/farm_example.json</kbd>
which setup default farm and provided as an example to copy and modify to describe your hosts.
</p>
<p>
Farm object consists of a pattens and limits arrays.
</p>

<ul>
<li><p>
<code>patterns</code><br/>
</p>
<ul>
   <li><p>
   <code>name</code><br/>
   Pattern name.
   </p></li>
   <li><p>
   <code>mask</code><br/>
   Hosts which names matches this A <a href="#regexp.html">mask</a> will take this pattern settings.
   </p></li>
   <li><p>
   <code>description</code><br/>
   Does not mean anything for sever, job or render host, only for humans.
   </p></li>
   <li><p>
   <code>os</code><br/>
   Operating system name. Can be matched by jobs.
   </p></li>
   <li><p>
   <code>capacity</code><br/>
   Running Tasks maximum capacity value.
   </p></li>
   <li><p>
   <code>maxtasks</code><br/>
   Maximum number of simultaneously running tasks.
   </p></li>
   <li><p>
   <code>power</code><br/>
   Some number which minimum can be needed by jobs.
   </p></li>
   <li><p>
   <code>properties</code><br/>
   Some string which matching can be needed by jobs.
   </p></li>
   <li><p>
   <code>services</code>
		An array of available services.
		<ul>
			<li><code>name</code>: Service name.
			<li><code>count</code>: (Optional) Limit per machine number.
		</ul>
   </p></li>
   <li><p>
   <code>remservices</code><br/>
		An array on services names to remove.
		If this array is empty, all services will be removed.
   </p></li>
</ul>
</li>
<li>
<code>limits</code><br/>
Service limit on entire farm. You can use it to describe software licenses limits.<br/>
<ul>
<li><code>service</code>: Service name.<br/></li>
<li><code>maxhosts</code>: Maximum number of different hosts service can run on.<br/></li>
<li><code>maxcount</code>: Maximum number of service total starts (no matter on the same host or not).<br/></li>
</ul>
</li>
<ul>

</ul>
</li>
</ul>
<p>
Host will take parameters from every matched pattern.
Each next pattern will redefine specified parameter.
If parameter is not specified host will use parameter from previously matched pattern.
If you want to remove some previously defined service use <i>remservice</i> field.
</p><p>
First pattern mask in default farm is ".*" - means that host with any name will take some default settings.
</p>

