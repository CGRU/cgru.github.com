<h2>Wake-On-LAN</h2>

<img src="images/afanasy/watch/wol_job.png" alt="wol_job" style="float:right;margin:20px"/>

<p>
You can setup Afanasy to Wake-On-LAN machines.
</p>

<p>
Wake-On-LAN work-flow:
</p>

<ul>
<li>
Server sends a message to client to ask him to sleep.
</li>
<li>
Client receives message from server to sleep.
</li>
<li>
Client executes a <b><i>wolsleep</i></b> command which can be customized in Afanasy configuration.
</li>
<li>
Client falls a sleep.
</li>
<li>
Server does not receive updates from client and make it offline.
</li>
<li>
Server "decides" to wake a render up.
</li>
<li>
Server adds a task <b><i>wolwake mac1 .. macN</i></b> to system job wake-on-lan block.
<b><i>wolwake</i></b> command can be customized in Afanasy configuration.
</li>
<li>
Another online and ready render executes the task.
</li>
<li>
This task sends magic packet for each mac address of a sleeping render to a broadcast address.
It is a small Python script provided with CGRU.
</li>
<li>
Render wakes up.
</li>
</ul>

<p>
If is a new feature. Not well tested.
</p>

<p>
You can wake and sleep renders by <code>afwatch</code> GUI and <code>afcmd</code> command.
</p>

<h3>Configuration</h3>
<p>See <a href="server_config.html">server configuration</a> about XML configuration files.</p>
<ul>
<li><p>
<code>render_cmd_wolsleep</code> = wolsleep<br/>
Sleep command performed by a render client.
</p></li>
<li><p>
<code>render_cmd_wolwake</code> = wolwake<br/>
Wake command constructed by a server and performed on a online client by the system job.
</p></li>
<li><p>
<code>sysjob_wol_service</code> = wakeonlan<br/>
Service type for Wake-On-LAN system block.
This parameter is commented in default configuration, "system" name used.
</p></li>
</ul>

