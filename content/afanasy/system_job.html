<h2>Afanasy System Job</h2>

<p>
System job is designed to execute system tasks on render farm (such as post commands).
When server needs to execute some command it appends system job with a task.
System job block has "system" service type by default.
<br/><b>*<i>Your farm hosts must have "system" service to execute job post commands (remove rendered scenes).</i></b>
</p>

<p>
You can explore system job by Watch GUI in super user mode.
You can manipulate it's parameters here to control its running.
(You only can't to delete system job.)
</p>

<table width="100%" border="0">
<tr align="center">
   <td>
      <br/>
      Jobs List: System job "afanasy"<br/>
      <img src="images/afanasy/watch/sysjob_job.png" alt="sysjob_job.png"/><br/>
   </td>
   <td>
      <br/>
      Tasks List: System job block<br/>
      <img src="images/afanasy/watch/sysjob_tasks.png" alt="sysjob_tasks.png"/><br/>
   </td>
</tr>
<tr align="center">
   <td>
      <br/>
      Renders List: System tasks execution<br/>
      <img src="images/afanasy/watch/sysjob_render.png" alt="sysjob_render.png"/><br/>
      </td>
   <td>
      <br/>
      Users List: System job user "afadmin"<br/>
      <img src="images/afanasy/watch/sysjob_user.png" alt="sysjob_user.png"/><br/>
      </td>
</tr>
</table>

<p>
If error system task can't be restarted (a number of error retries reached the maximum value) they are deleted.
It needed to prevent the growth of system tasks number.
</p>

<p>
You can watch system job log and its task log.
When error occurs the log will be appended with the command output.
</p>

<p>
To reset system commands queue you can restart block or task.
</p>

<h3>Configuration</h3>

<ul>
<li><p>
<code>sysjob_tasklife</code> = 1800<br/>
Maximum system task age in seconds.
If task age will equal to this number it will be treated as an error task.
It needed to prevent the growth of tasks number, if some task(s) can't be executed (restarted).
</p></li>
<li><p>
<code>sysjob_tasksmax</code> = 1000<br/>
Maximum number of <i>running</i> or <i>ready</i> tasks.
If number of tasks will equal to this number, no new tasks will be created.
But commands will not be lost, they will be stored in special list, to wait for some tasks will be done.
It needed to prevent the growth of tasks number, if system job running will be stopped for some time.
( may be all hosts appeared in black lists ).
Tasks need more memory and CPU time then a simple commands list.
</p></li>
<li><p>
<code>sysjob_postcmd_service</code> = postcmd<br/>
Service type for Post Commands system block.
This parameter is commented in default configuration, "system" name used.
</p></li>
<li><p>
<code>sysjob_wol_service</code> = wakeonlan<br/>
Service type for Wake-On-LAN system block.
This parameter is commented in default configuration, "system" name used.
</p></li>
</ul>

