<h2>Movie Maker</h2>
<p>
Movie Maker is an utility to create movie file from image sequence. It consists of some scripts and GUI for it.
Scripts are written on Python and GUI is written on PyQt.
Scripts use other utilities:
<a href="http://www.imagemagick.org" target="_blank">ImageMagick</a> to draw annotations and
<a href="http://www.ffmpeg.org" target="_blank">ffmpeg</a> to encode.
</p>

<div class="cnavblock" style="height:700px">
<h3>Schema</h3>

<div class="cnavabs" style="left:10px;top:-100px;width:1000px;height:700px;">

<div class="arrows" style="position:absolute;opacity:0.5;width:1000px;height:700px;/*border:1px solid #000;*/"
arrows="{[
[[0,0,200,1],[100,100],[100,70],[850,70],[850,99]],
[[0,0,200,1],[600,220],[610,220],[850,170],[850,149]],

[[100,0,200,1],[700,290],[670,290],[630,180],[300,180],[250,120],[201,120]],
[[100,0,200,1],[700,280],[680,280],[630,120],[600,120]],

[[0,0,0,3],[100,150],[100,170],[200,280],[200,298]],
[[0,0,0,3],[500,150],[500,198]],
[[0,0,0,3],[500,240],[500,250],[400,280],[400,298]],
[[0,0,0,3],[250,340],[250,350],[200,380],[200,398]],
[[0,0,0,3],[100,440],[100,498]],
[[0,0,0,3],[350,340],[350,350],[500,580],[500,598]],

[[0,0,200,3],[700,125],[690,125],[600,520],[202,520]],
[[0,0,200,3],[100,540],[100,598]],
[[0,0,200,3],[200,620],[398,620]],
[[0,0,200,3],[500,640],[500,650],[300,680],[300,698]],

[[100,0,200,3],[700,380],[650,380],[550,320],[502,320]],
[[100,0,200,3],[700,480],[650,480],[550,420],[302,420]]

]}">
</div>

<div style="left:0px;top:100px;width:200px;height:30px;" class="cnavblock">
<b>Dailies GUI</b></div>

<div style="left:400px;top:100px;width:200px;height:30px;" class="cnavblock">
<b>Scan Scan GUI</b></div>

<div style="left:700px;top:100px;width:300px;height:30px;" class="cnavblock blue">
<b>input sequence</b></div>

<div style="left:400px;top:200px;width:200px;height:20px;" class="cnavblock">
<b>scanscan.py</b></div>

<div style="left:100px;top:300px;width:400px;height:20px;" class="cnavblock">
<b>makemovie.py</b></div>

<div style="left:0px;top:400px;width:300px;height:20px;" class="cnavblock">
<b>makeframe.py</b></div>

<div style="left:400px;top:600px;width:200px;height:20px;" class="cnavblock">
<b>ffmpeg</b></div>

<div style="left:0px;top:500px;width:200px;height:20px;" class="cnavblock">
<b>convert</b></div>

<div style="left:0px;top:600px;width:200px;height:20px;" class="cnavblock">
<b>temporary sequence</b></div>

<div style="left:100px;top:700px;width:400px;height:20px;" class="cnavblock">
<b>output movie</b></div>

<div style="left:700px;top:250px;width:300px;height:50px;" class="cnavblock info magenta" info="
Location:<br/>
<kbd>cgru/utilities/moviemaker/formats</kbd><br/>
Example:
<pre>
PAL (720x576:1.09)
720x576x1.09
</pre>
1. A title to display in a GUI.<br/>
2. <code>WIDTHxHEIGHTxASPECT</code><br/>
or <code>WIDTHxHEIGHT</code><br/>
">
<b>formats</b><br/>format templates</div>

<div style="left:700px;top:350px;width:300px;height:50px;" class="cnavblock info magenta" info="
Location:<br/>
<kbd>cgru/utilities/moviemaker/codecs</kbd><br/>
Example:
<pre>
DNxHD 36MBits
ffmpeg -y -r @FPS@ -i ''@INPUT@'' -vcodec dnxhd -b 36M ''@OUTPUT@.@CONTAINER@''
</pre>
1. Title to display in a GUI.<br/>
2. Command template for <b>ffmpeg</b>.<br/>
">
<b>codecs</b><br/>encode command templates</div>

<div style="left:700px;top:450px;width:300px;height:50px;" class="cnavblock info magenta" info="
Location:<br/>
<kbd>cgru/utilities/moviemaker/templates</kbd><br/>
Example:
<pre style=''font-size:11px''>
-stroke black -strokewidth 3
-fill white -pointsize @SIZE_1/20Y@ -gravity northwest -annotate +@SIZE_1/30X@+@SIZE_1/30Y@ ''%(PROJECT)s''
-fill white -pointsize @SIZE_1/20Y@ -gravity northeast -annotate +@SIZE_1/30X@+@SIZE_1/30Y@ ''%(SHOT)s %(VERSION)s''
-fill white -pointsize @SIZE_1/25Y@ -gravity north     -annotate            +0+@SIZE_1/30Y@ ''%(DATETIME)s''
-fill white -pointsize @SIZE_1/20Y@ -gravity southeast -annotate +@SIZE_1/30X@+@SIZE_1/30Y@ ''%(FRAME)s''
-fill white -pointsize @SIZE_1/24Y@ -gravity southwest -annotate +@SIZE_1/24X@+@SIZE_1/30Y@ ''%(MOVIENAME)s''
-stroke none
-fill white -pointsize @SIZE_1/20Y@ -gravity northwest -annotate +@SIZE_1/30X@+@SIZE_1/30Y@ ''%(PROJECT)s''
-fill white -pointsize @SIZE_1/20Y@ -gravity northeast -annotate +@SIZE_1/30X@+@SIZE_1/30Y@ ''%(SHOT)s %(VERSION)s''
-fill white -pointsize @SIZE_1/25Y@ -gravity north     -annotate            +0+@SIZE_1/30Y@ ''%(DATETIME)s''
-fill white -pointsize @SIZE_1/20Y@ -gravity southeast -annotate +@SIZE_1/30X@+@SIZE_1/30Y@ ''%(FRAME)s''
-fill white -pointsize @SIZE_1/24Y@ -gravity southwest -annotate +@SIZE_1/24X@+@SIZE_1/30Y@ ''%(MOVIENAME)s''
</pre>
Command template for ImageMagick <b>convert</b> tool.<br/>
">
<b>templates</b><br/>convert command templates</div>

</div>
</div>


<h2>Dailies</h2>

<div style="text-align:center">
<p style="float:left">
<b id="dailies_general" class="anchor">General Tab:</b><br/>
<img width="212px" class="forontop" src="images/moviemaker/dailies_general.png" alt="dailies_general.png"/>
</p>
<p style="float:left">
<b id="dailies_drawing" class="anchor">Drawing Tab:</b><br/>
<img width="212px" class="forontop" src="images/moviemaker/dailies_drawing.png" alt="dailies_drawing.png"/>
</p>
<p style="float:left">
<b id="dailies_parameters" class="anchor">Parameters Tab:</b><br/>
<img width="212px" class="forontop" src="images/moviemaker/dailies_parameters.png" alt="dailies_parameters.png"/>
</p>
<p style="float:left">
<b id="dailies_stereo" class="anchor">Stereo Tab:</b><br/>
<img width="212px" class="forontop" src="images/moviemaker/dailies_stereo.png" alt="dailies_stereo.png"/>
</p>
<p style="float:left">
<b id="dailies_decode" class="anchor">Decode Tab:</b><br/>
<img width="212px" class="forontop" src="images/moviemaker/dailies_decode.png" alt="dailies_decode.png"/>
</p>
<p style="float:left">
<b id="dailies_audio" class="anchor">Audio Tab:</b><br/>
<img width="212px" class="forontop" src="images/moviemaker/dailies_audio.png" alt="dailies_audio.png"/>
</p>
<p style="float:left">
<b id="dailies_afanasy" class="anchor">Afanasy Tab:</b><br/>
<img width="212px" class="forontop" src="images/moviemaker/dailies_afanasy.png" alt="dailies_afanasy.png"/>
</p>
</div>

<p style="clear:both;"></p>

<h3 id="makemovie" class="anchor">makemovie.py</h3>
<p>
This script creates a movie from images sequence.
It consists of two stages.
Reformat, annotate input images and store them in temporary directory.
Encode temporary images into the movie.
</p>
<p>
<kbd>makemovie.py</kbd> script uses <kbd>makeframe.py</kbd> script to reformat and annotate each frame.
It passes all information through command line arguments to this script.
There are some templates how to annotate images.
This templates are command arguments to ImageMagick <kbd>convert</kbd> utility.
Templates stored in <code>cgru/utilities/moviemaker/templates</code> folder.
You can choose template in GUI or specify it in command argument.
It can also produce a slate, if you specify a slate template.
</p>
<p>
Codec presets are stored in movemaker folder.
First line is the name of a preset, second is an encode command.
You can choose preset in GUI or specify it in command argument.
</p>

<h2 id="scan" class="anchor">Scan Scan</h2>
<p>
It is an utility to scan folder and its sub-folders for an images sequences, and to create moves from them.
It consists of a <kbd>scanscan.py</kbd> command and a <kbd>scandialog.py</kbd> GUI for it.
Both are Python scripts, GUI is on PyQt.
Command script scans folders for images and launches <kbd>makemovie.py</kbd> for each sequence.
</p>

<div style="text-align:center">
<p style="float:left">
<b id="scan_general" class="anchor">General Tab:</b><br/>
<img width="212px" class="forontop" src="images/moviemaker/scan_general.png" alt="scan_general.png"/>
</p>
<p style="float:left">
<b id="scan_parameters" class="anchor">Parameters Tab:</b><br/>
<img width="212px" class="forontop" src="images/moviemaker/scan_parameters.png" alt="scan_parameters.png"/>
</p>
</div>

